(()=>{"use strict";var t={619:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}",""]);const o=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=t(e);return e[2]?"@media ".concat(e[2]," {").concat(a,"}"):a})).join("")},e.i=function(t,a,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),e.push(c))}},e}},379:(t,e,a)=>{var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}t[e]=a}return t[e]}}(),i=[];function s(t){for(var e=-1,a=0;a<i.length;a++)if(i[a].identifier===t){e=a;break}return e}function c(t,e){for(var a={},n=[],r=0;r<t.length;r++){var o=t[r],c=e.base?o[0]+e.base:o[0],l=a[c]||0,d="".concat(c," ").concat(l);a[c]=l+1;var u=s(d),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(f)):i.push({identifier:d,updater:m(f,e),references:1}),n.push(d)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function f(t,e,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function v(t,e,a){var n=a.css,r=a.media,o=a.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,h=0;function m(t,e){var a,n,r;if(e.singleton){var o=h++;a=p||(p=l(e)),n=f.bind(null,a,o,!1),r=f.bind(null,a,o,!0)}else a=l(e),n=v.bind(null,a,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(a)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var a=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<a.length;n++){var r=s(a[n]);i[r].references--}for(var o=c(t,e),l=0;l<a.length;l++){var d=s(a[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}a=o}}}}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,a),o.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.nc=void 0,(()=>{const t={props:{curso_id:"",retornable:{type:Boolean,default:!1}},data:function(){return{loading:!1,curso:{id:0,capacidades:[],matricula_unidades:[]},notas:{}}},mounted:function(){this.obtenerDatos(),this.$nextTick((function(){window.onbeforeunload=function(){}}))},methods:{obtenerDatos:function(){var t=this;this.loading=!0,this.$http.get("/cursos/"+this.curso_id+"/notas").then((function(e){var a=e.data;t.curso=a.curso,t.notas=a.notas,t.loading=!1,t.$nextTick((function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)}))}))})).catch((function(e){Swal.fire({title:"Error",text:e.data.message||"No se pudo cargar",icon:"error"}),t.loading=!1}))},guardar:function(){for(var t in this.notas){var e=this.notas[t];if(e.valor<0||e.valor>20)return void alert("Revise los valores ingresados")}var a=this;a.loading=!0,Swal.fire({title:"¿Estás seguro que desea guardar estas notas?",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, guardar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&a.$http.post("/cursos/"+a.curso.id+"/notas",a.notas).then((function(t){t.data;a.loading=!1,a.obtenerDatos(),Swal.fire({title:"Completado",text:"Notas guardadas",icon:"success"}).catch((function(t){a.loading=!1,Swal.fire({title:"Error",text:t.data.message||"No se pudo guardar",icon:"error"})}))})),a.loading=!1}))},mensajear:function(t){t.esta_inhabilitado&&Swal.fire({title:"Alerta",text:"El alumno está inhabilitado por la acumulación del 30% de inasistencias, conforme al reglamento interno de la institución",icon:"warning"})},calcularPromedio:function(t,e){var a=0,n=0;for(var r in t.indicadores){var o=this.notas[e+"-"+t.indicadores[r].id];a+=parseFloat(o.valor||0),n+=1}return t.valor=a/n,t.valor.toFixed(0)},calcularPromedioFinal:function(t){var e=0,a=0;for(var n in this.curso.capacidades){var r=this.curso.capacidades[n];e+=this.calcularPromedio(r,t)*parseFloat(r.peso),a+=parseFloat(r.peso)}return(e/a).toFixed(0)}},watch:{curso_id:function(){this.obtenerDatos()}}};var e=a(379),n=a.n(e),r=a(619),o={insert:"head",singleton:!1};n()(r.Z,o);r.Z.locals;var i=function(t,e,a,n,r,o,i,s){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=c):r&&(c=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}(t,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card border-0"},[t.curso.matricula_unidades.length>0?e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-between"},[t.retornable?e("a",{staticClass:"btn btn-outline-primary",attrs:{href:"/cursos/notas"}},[e("i",{staticClass:"fa fa-arrow-left mr-2"}),t._v("Lista de unidades")]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading},on:{click:t.guardar}},[e("i",{staticClass:"fa fa-save mr-2"}),t._v("Guardar")])])]):t._e(),t._v(" "),t.curso.matricula_unidades.length>0?e("div",{staticClass:"card-body p-0 border-0 table-responsive"},[e("table",{staticClass:"table table-sm table-bordered"},[e("thead",[e("tr",[e("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("Código")]),t._v(" "),e("th",{attrs:{rowspan:"2"}},[t._v("Alumno")]),t._v(" "),t._l(t.curso.capacidades,(function(a){return e("th",{staticClass:"text-center",attrs:{colspan:a.indicadores.length+1}},[t._v("\n                        "+t._s(a.nombre)+" "),e("br"),t._v("\n                        ("+t._s(a.porcentaje)+"%)\n                    ")])})),t._v(" "),e("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("Promedio")])],2),t._v(" "),e("tr",[t._l(t.curso.capacidades,(function(a){return[t._l(a.indicadores,(function(a){return e("th",{staticClass:"text-center",staticStyle:{"min-width":"50px !important"},attrs:{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:a.nombre}},[t._v("\n                            "+t._s(a.codigo)+"\n                        ")])})),t._v(" "),e("th",{staticClass:"text-right",attrs:{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Promedio"}},[t._v("Prom.")])]}))],2)]),t._v(" "),e("tbody",t._l(t.curso.matricula_unidades,(function(a){var n,r,o,i;return e("tr",[e("td",{staticClass:"text-center"},[t._v(t._s(null===(n=a.matricula)||void 0===n?void 0:n.codigo))]),t._v(" "),e("td",{staticClass:"text-nowrap"},[t._v(t._s(null===(r=a.matricula)||void 0===r||null===(o=r.estudiante)||void 0===o||null===(i=o.persona)||void 0===i?void 0:i.nombre_completo))]),t._v(" "),t._l(t.curso.capacidades,(function(n){return[t._l(n.indicadores,(function(n){return e("td",{staticClass:"text-center pr-0"},[e("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:t.notas[a.id+"-"+n.id].valor,expression:"notas[mu.id + '-' + indicador.id].valor",modifiers:{lazy:!0,number:!0}}],staticClass:"form-control",class:{"border-danger":t.notas[a.id+"-"+n.id].valor<0||t.notas[a.id+"-"+n.id].valor>20,"border-0":t.notas[a.id+"-"+n.id].valor>=0&&t.notas[a.id+"-"+n.id].valor<=20},attrs:{type:"number",step:"0.01",disabled:t.loading,readonly:a.esta_inhabilitado},domProps:{value:t.notas[a.id+"-"+n.id].valor},on:{click:function(e){return t.mensajear(a)},change:function(e){t.$set(t.notas[a.id+"-"+n.id],"valor",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])})),t._v(" "),e("th",{staticClass:"text-right"},[t._v("\n                            "+t._s(t.calcularPromedio(n,a.id))+"\n                        ")])]})),t._v(" "),a.esta_inhabilitado?e("th",{staticClass:"text-center"},[e("div",{staticClass:"badge bg-danger"},[t._v("Inhabilitado (30%)")])]):e("th",{staticClass:"text-right"},[t._v("\n                        "+t._s(t.calcularPromedioFinal(a.id))+"\n                    ")])],2)})),0)])]):e("div",{staticClass:"card-body"},[e("div",{staticClass:"alert alert-danger"},[t._v("No hay alumnos matriculados")])])])}),[],!1,null,null,null);const s=i.exports;new Vue({el:"#app",data:{test:"00"},components:{UsakoNotas:s}})})()})();